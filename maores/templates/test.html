{% extends "base.html" %}

{% load staticfiles %}

{% block title %}
{{ competition }} ({{ test.division }})
{% endblock %}

{% block navcompetitions %}class="active"{% endblock %}

{% block navbar %}
<div class="navbar-fixed">
  <nav>
    <div class="row teal">
      <div class="col s12">
        <a href="/competitions" class="breadcrumb">Competitions</a>
        <a href="/competitions/#{{ competition.date.year }}" class="breadcrumb">{{ competition.date.year }}</a>
        <a href="{{ competition.get_absolute_url }}" class="breadcrumb">{{ competition.name }}</a>
        <a href="#!" class="breadcrumb">{{ test.division}} Indiv</a>
      </div>
    </div>
  </nav>
</div>
{% endblock %}

{% block content %}

<div class="row">
  <div class="col s12 m12 l9">
  <div class="container">
    <h3 class="light"> {{ competition }} {{ test.division }} Indiv</h3>
    <div class="row">
      <div class="input-field col s12 m8 l6">
          <input id="searchtable" type="text">
          <label for="searchtable">Filter by name or school</label>
      </div>
      </div>
    <table class="bordered highlight">
        <thead>
        <tr>
            <th class="rank-item"> Rank </th>
            <th class="school-item"> School </th>
            <th class="name-item"> Name </th>
            <th class="score-item"> Score </th>
            <th class='right-item'> Right </th>
            <th class='wrong-item'> Wrong </th>
            <th class='blank-item'> Blank </th>
            <th class='tscore-item'> T-Score </th>
            {% if request.user.is_authenticated and "@ahschool.com" in request.user.email %}
            <th class='sscore-item'> S-Score </th>
            {% endif %}
        </tr>
        </thead>
        <tbody>
        {% for paper in testpapers %}
        <tr>
            <td class="rank-item"><a name="{{paper.mathlete.mao_id}}"></a>{{ paper.place }}</td>
            <td class="school-item"> {{ paper.school }} </td>
            <td class="name-item"> <a href="{{ paper.mathlete.get_absolute_url }}" class="teal-text">{{ paper.mathlete.first_name }} {{ paper.mathlete.last_name }}</a> </td>
            <td class="score-item"> {{ paper.score }} </td>
            <td class='right-item'> {{ paper.right }} </td>
            <td class='wrong-item'> {{ paper.wrong }} </td>
            <td class='blank-item'> {{ paper.blank }} </td>
            <td class='tscore-item'> {{ paper.t_score|floatformat:3 }} </td>
            {% if request.user.is_authenticated and "@ahschool.com" in request.user.email %}
            <td class='sscore-item'> {{ paper.s_score|floatformat:3 }} </td>
            {% endif %}
        </tr>
        {% endfor %}
        </tbody>
    </table>
  </div>
  </div>

  <div class="col l3 hide-on-med-and-down">
    <div class="container table-selector">
    <p"> Data Attributes</p>
    <div class="divider"></div>
    <form action="#">
      <p>
        <input type="checkbox" class="filled-in" id="rank-check-box" checked="checked" />
        <label for="rank-check-box">Rank</label>
      </p>
      <p>
        <input type="checkbox" class="filled-in" id="school-check-box" checked="checked" />
        <label for="school-check-box">School</label>
      </p>
      <p>
        <input type="checkbox" class="filled-in" id="name-check-box" checked="checked" />
        <label for="name-check-box">Name</label>
      </p>
      <p>
        <input type="checkbox" class="filled-in" id="score-check-box" checked="checked" />
        <label for="score-check-box">Score</label>
      </p>
      <p>
        <input type="checkbox" class="filled-in" id="right-check-box" checked="checked" />
        <label for="right-check-box">Right</label>
      </p>
      <p>
        <input type="checkbox" class="filled-in" id="wrong-check-box" checked="checked" />
        <label for="wrong-check-box">Wrong</label>
      </p>
      <p>
        <input type="checkbox" class="filled-in" id="blank-check-box" checked="checked" />
        <label for="blank-check-box">Blank</label>
      </p>
      <p>
        <input type="checkbox" class="filled-in" id="tscore-check-box" checked="checked" />
        <label for="tscore-check-box">T-Score</label>
      </p>
      {% if request.user.is_authenticated and "@ahschool.com" in request.user.email %}
      <p> Unique to Heritage </p>
      <div class="divider"></div>
      <p>
        <input type="checkbox" class="filled-in" id="sscore-check-box" checked="checked" />
        <label for="sscore-check-box">S-Score</label>
      </p>
      {% endif %}
    </form>
    </div>
  </div>
  </div>
</div>

<!--
{% for paper in testpapers %}
<div id="modal{{ paper.mathlete.mao_id }}" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{ paper.mathlete.first_name }} {{ paper.mathlete.last_name }}</h4>
      </div>
      <div class="modal-body">
        <p><table class="table table-striped table-hover ">
            <thead>
              <tr>
                <th>Attribute</th>
                <th>Value</th>
              </tr>
              </thead>
            <tbody>
              <tr>
                <td>Rank</td>
                <td>{{ paper.place }}</td>
              </tr>
              <tr>
                <td>School</td>
                <td>{{ paper.school }}</td>
              </tr>
              <tr>
                <td>Score</td>
                <td>{{ paper.score }}</td>
              </tr>
              <tr>
                <td>Right</td>
                <td>{{ paper.right }}</td>
              </tr>
              <tr>
                <td>Wrong</td>
                <td>{{ paper.wrong }}</td>
              </tr>
              <tr>
                <td>Blank</td>
                <td>{{ paper.blank }}</td>
              </tr>
              <tr>
                <td>T-Score</td>
                <td>{{ paper.t_score|floatformat:3 }}</td>
              </tr>
              {% if request.user.is_authenticated and "@ahschool.com" in request.user.email %}<tr>
                <td>S-Score</td>
                <td>{{ paper.s_score|floatformat:3 }}</td>
              </tr>{% endif %}
            </tbody>
            </table>
            </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
{% endfor %}-->


<script>
$(document).ready(function(){
    $('.table-selector').pushpin({
      top: 0,
      bottom: $(document).height()-900,
      offset: ($(window).height() - $('.table-selector').height()) / 2.0
    });
    $('table').filterTable({
        inputSelector : '#searchtable',
    });
    $('#rank-check-box').change(function(){
      $('.rank-item').toggle(this.checked)
    });
    $('#school-check-box').change(function(){
      $('.school-item').toggle(this.checked)
    });
    $('#name-check-box').change(function(){
      $('.name-item').toggle(this.checked)
    });
    $('#score-check-box').change(function(){
      $('.score-item').toggle(this.checked)
    });
    $('#right-check-box').change(function(){
      $('.right-item').toggle(this.checked)
    });
    $('#wrong-check-box').change(function(){
      $('.wrong-item').toggle(this.checked)
    });
    $('#blank-check-box').change(function(){
      $('.blank-item').toggle(this.checked)
    });
    $('#tscore-check-box').change(function(){
      $('.tscore-item').toggle(this.checked)
    });
    $('#sscore-check-box').change(function(){
      $('.sscore-item').toggle(this.checked)
    });
});
</script>
{% endblock %}
